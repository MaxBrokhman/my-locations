(this["webpackJsonpmy-locations"]=this["webpackJsonpmy-locations"]||[]).push([[0],{21:function(e,t,a){e.exports=a(37)},26:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(19),i=a.n(r),o=a(6),l=a(9),u=a(1),m=a(13),s=a(3),d="".concat(window.location.host,"-").concat(window.location.origin,"-state"),E=localStorage.getItem(d),g=E&&JSON.parse(E)||{categories:[],activeCategory:null,newCategoryName:""},p={state:g,dispatch:null},f=Object(n.createContext)(p),b=function(){return Object(n.useContext)(f)},y=function(e,t){var a=function(e,t){switch(t.type){case"CREATE_CATEGORY":return Object(s.a)(Object(s.a)({},e),{},{newCategoryName:"",categories:[].concat(Object(m.a)(e.categories),[t.payload])});case"ENTER_CATEGORY_NAME":return Object(s.a)(Object(s.a)({},e),{},{newCategoryName:t.payload});case"SET_ACTIVE_CATEGORY":return Object(s.a)(Object(s.a)({},e),{},{activeCategory:t.payload});case"DELETE_CATEGORY":return Object(s.a)(Object(s.a)({},e),{},{categories:e.categories.filter((function(t){return t.id!==e.activeCategory.id})),activeCategory:null});case"UPDATE_ACTIVE_CATEGORY":var a=Object(s.a)(Object(s.a)({},e.activeCategory),{},{name:t.payload}),n=e.categories.findIndex((function(e){return e.id===a.id}));return Object(s.a)(Object(s.a)({},e),{},{activeCategory:a,categories:[].concat(Object(m.a)(e.categories.slice(0,n)),[a],Object(m.a)(e.categories.slice(n+1)))});default:return Object(s.a)({},e)}}(e,t);return localStorage.setItem(d,JSON.stringify(a)),a},v=function(e,t){return t({type:"SET_ACTIVE_CATEGORY",payload:e})},N=function(e){var t=e.name,a=e.setEditing,r=Object(n.useRef)(null),i=function(e){var t=e.name,a=e.setEditing,c=e.inputRef,r=b().dispatch,i=Object(n.useState)(t),o=Object(l.a)(i,2),u=o[0],m=o[1];return Object(n.useEffect)((function(){return c.current.focus(),function(){return a(!1)}}),[a,c]),{editInputHandler:function(e){return m(e.target.value)},editedName:u,submitEditHandler:function(e){e.preventDefault(),a(!1),function(e,t){t({type:"UPDATE_ACTIVE_CATEGORY",payload:e})}(u,r)},cancelHandler:function(){a(!1)}}}({name:t,setEditing:a,inputRef:r}),o=i.editInputHandler,u=i.editedName,m=i.submitEditHandler,s=i.cancelHandler;return c.a.createElement("form",{className:"input-group category-name-edit",onSubmit:m},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("span",{className:"input-group-text"},"Edit Category Name")),c.a.createElement("input",{type:"text",className:"form-control","aria-label":"Category name input",value:u,onChange:o,ref:r}),c.a.createElement("div",{className:"input-group-append"},c.a.createElement("button",{className:"btn btn-outline-success",type:"submit"},"Confirm"),c.a.createElement("button",{className:"btn btn-outline-danger",type:"submit",onClick:s},"Cancel")))},C=window.location.pathname.match(/\/\w/)?window.location.pathname:"",O="".concat(C),h="".concat(C,"active-category"),j="".concat(C,"new-category"),T=(a(26),function(e){var t=e.editBtnHandler,a=e.deleteBtnHandler,n=Object(u.h)().pathname;return c.a.createElement("div",{className:"d-flex"},n!==h&&c.a.createElement(o.b,{to:h},c.a.createElement("button",{type:"button",className:"btn btn-success item-action-btn details-action"},"Details")),c.a.createElement("button",{type:"button",className:"btn btn-warning item-action-btn edit-action",onClick:t},"Edit"),c.a.createElement("button",{type:"button",className:"btn btn-danger item-action-btn delete-action",onClick:a},"Delete"))}),w=(a(32),function(e){var t=e.activeItem,a=e.deleteBtnHandler,r=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],c=t[1];return{isEditing:a,setEditing:c,editBtnHandler:function(){return c(!0)}}}(),i=r.editBtnHandler,m=r.isEditing,s=r.setEditing,d=function(e){return Object(u.h)().pathname===j?{caption:"New Category"}:e?{caption:e.name}:{caption:"Categories"}}(t).caption;return c.a.createElement("div",{className:"btn-group alert alert-primary toolbar d-flex justify-content-between",role:"group","aria-label":"Category actions"},c.a.createElement("div",{className:"input-group-prepend toolbar-caption"},c.a.createElement("span",{className:"input-group-text"},d)),m&&t&&c.a.createElement(N,{name:t.name,setEditing:s}),t?c.a.createElement(T,{deleteBtnHandler:a,editBtnHandler:i}):c.a.createElement(o.b,{to:j},c.a.createElement("button",{type:"button",className:"btn btn-success item-action-btn add-action"},"Add New Category")))}),H=(a(33),function(e){var t=e.name,a=e.clickHandler,n=e.isActive;return c.a.createElement("li",{className:"list-group-item categories-item ".concat(n?"active":""),onClick:a},t)}),A=function(e){return"A"===e.tagName||"BUTTON"===e.tagName||"INPUT"===e.tagName||"LABEL"===e.tagName},x=function(e){var t=e.children,a=e.dispatch,r=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=function(e){!r.current||r.current.contains(e.target)||e.composedPath().some(A)||v(null,a)};return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}}),[a,r]),c.a.createElement("div",{ref:r},t)},R=function(){var e=function(){var e=b(),t=e.state,a=e.dispatch;return{categories:t.categories,itemClickHandler:function(e){return function(){return t.activeCategory&&e===t.activeCategory.id?v(null,a):v(t.categories.find((function(t){return t.id===e})),a)}},dispatch:a,activeCategory:t.activeCategory}}(),t=e.activeCategory,a=e.categories,n=e.dispatch,r=e.itemClickHandler;return c.a.createElement("div",{className:"categories-list d-flex flex-column flex-grow-1"},c.a.createElement(x,{dispatch:n},c.a.createElement("ul",{className:"list-group"},a.map((function(e){return c.a.createElement(H,{name:e.name,key:e.id,isActive:t&&e.id===t.id,clickHandler:r(e.id)})})))))},I=(a(34),function(e){var t=e.name,a=e.nameInputHandler,r=e.submitNameHandler,i=Object(n.useRef)(null);return Object(n.useEffect)((function(){i.current.focus()}),[]),c.a.createElement("form",{className:"new-category-form",onSubmit:r},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"new-category-name"},"Category Name"),c.a.createElement("input",{id:"new-category-name",type:"text",className:"form-control",onChange:a,value:t,ref:i}),c.a.createElement("small",{className:"form-text text-muted"},"Enter the name for a new location category.")),c.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"))}),_=(a(35),function(e){var t=e.activeCategory;return c.a.createElement("section",{className:"category-details d-flex flex-column"},c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-header"},"Category Name:"),c.a.createElement("div",{className:"list-group-item"},t.name)),c.a.createElement(o.b,{to:O,className:"align-self-center mt-2"},c.a.createElement("button",{type:"button",className:"btn btn-primary"},"Back to list")))}),k=function(e,t){var a=Object(u.g)();return{nameInputHandler:function(e){return function(e,t){return t({type:"ENTER_CATEGORY_NAME",payload:e})}(e.target.value,t)},submitNameHandler:function(n){n.preventDefault(),function(e,t){t({type:"CREATE_CATEGORY",payload:{name:e,id:(new Date).getTime()}})}(e,t),a.push(O)}}},B=(a(36),function(){var e=Object(n.useReducer)(y,g),t=Object(l.a)(e,2),a=t[0],r=t[1],i=k(a.newCategoryName,r),m=i.nameInputHandler,s=i.submitNameHandler,d=function(e){return{deleteBtnHandler:function(){return function(e){return e({type:"DELETE_CATEGORY"})}(e)}}}(r).deleteBtnHandler;return c.a.createElement(f.Provider,{value:{state:a,dispatch:r}},c.a.createElement("header",null,c.a.createElement("div",{className:"container"},c.a.createElement("h1",{className:"display-4 page-heading"},c.a.createElement(o.b,{to:O},"myLocations")),c.a.createElement(w,{activeItem:a.activeCategory,deleteBtnHandler:d}))),c.a.createElement("main",{className:"container main-container d-flex justify-content-center"},c.a.createElement(u.d,null,c.a.createElement(u.b,{path:O,exact:!0},a.categories.length?c.a.createElement(R,null):c.a.createElement("h2",{className:"display-4 text-center categories-heading align-self-center"},"There is no categories yet")),c.a.createElement(u.b,{path:j},c.a.createElement(I,{nameInputHandler:m,name:a.newCategoryName,submitNameHandler:s})),c.a.createElement(u.b,{path:h},a.activeCategory?c.a.createElement(_,{activeCategory:a.activeCategory}):c.a.createElement(u.a,{to:O})))))});i.a.render(c.a.createElement(n.StrictMode,null,c.a.createElement(o.a,null,c.a.createElement(B,null))),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.88c3dac2.chunk.js.map